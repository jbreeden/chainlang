<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Chainlang : Utility for easily creating chainable methods and complex fluent APIs in JavaScript" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Chainlang</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jbreeden/chainlang">View on GitHub</a>

          <h1 id="project_title">Chainlang</h1>
          <h2 id="project_tagline">Utility for easily creating chainable methods and complex fluent APIs in JavaScript</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jbreeden/chainlang/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jbreeden/chainlang/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="chainlang" class="anchor" href="#chainlang"><span class="octicon octicon-link"></span></a>Chainlang</h1>

<p>Chainlang is a utility for easily creating chainable methods and complex fluent APIs (or fluent interfaces) in JavaScript.</p>

<h1>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h1>

<p>With chainlang, you define the hierarchical structure of your fluent API as a plain-old JavaScript object. After you've defined this structure (we'll call it your "language specification") you pass it to <code>chainlang.create</code> which takes care of details like making methods chainable or allowing links in a chained expression to share data, among other things.</p>

<p>So, for example, with a language defined like this:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">fromSpec</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">where</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cond</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_subject</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subject</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">cond</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">take</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">all</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_breaksChain</span><span class="p">();</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_subject</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="nx">chainlang</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">fromSpec</span><span class="p">);</span>
</pre></div>

<p>we would be able to:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">evens</span> <span class="o">=</span> 
    <span class="nx">from</span><span class="p">(</span><span class="nx">numbers</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span> 
    <span class="p">}).</span><span class="nx">take</span><span class="p">.</span><span class="nx">all</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">evens</span><span class="p">);</span> <span class="c1">// Logs: [ 2, 4, 6 ]</span>
</pre></div>

<p>Granted, this isn't the most feature-filled API ever created (<a href="http://jbreeden.github.io/chainlang/fromjs/from.html">yet</a>), but it was incredibly simple to define. There are no closures or other tricks to capture the argument to the <code>from(...)</code> function, it is simply accessible by any method in our language spec, at any level in the hierarchy, as <code>this._subject</code>.</p>

<p>Also note that no care was taken to return <code>this</code> from the methods of <code>fromSpec</code> as is typical with chainable methods. In fact, <code>fromSpec.where</code> doesn't return anything, but we're still able to chain together an expression such as <code>from(numbers).where(cond).take.all()</code>. That's because <code>chainlang.create</code> creates a copy of its argument (the language spec) where all methods are proxied. The proxied methods all have their <code>this</code> context permanently bound to a chain object, and they all return the chain object implicitly.</p>

<p>So, what happens if you want to return a value? Just as in <code>fromSpec.take.all</code> above, you call <code>this._breaksChain()</code>. This sets a flag on the chain object itself that tells the proxied methods to return their own return value instead of implicitly returning the chain object.</p>

<p>That's the basic idea.</p>

<h1>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h1>

<p>Chainlang provides a small but powerful set of features to control the semantics of your generated API.
Some of these features, like the <code>_breaksChain</code> method discussed in the introduction, are fields or methods
accessible via <code>this</code> within the methods of your language specification object. Others, like <code>_wrapper</code>, are
special nodes that can be placed within your specification. (For an interesting use of <code>_wrapper</code> nodes, see
the section on "Join Wrappers" in the <a href="http://jbreeden.github.io/chainlang/fromjs/from.html">full fromjs example</a>)</p>

<p>To see all the available features, check out the <a href="http://jbreeden.github.io/chainlang/spec/spec.html">chainlang spec</a>.</p>

<h1>
<a name="more-resources" class="anchor" href="#more-resources"><span class="octicon octicon-link"></span></a>More Resources</h1>

<ul>
<li><a href="http://jbreeden.github.io/chainlang/fromjs/from.html">Example: Creating a full-feature fromjs library</a></li>
<li><a href="http://jbreeden.github.io/chainlang/source/chainlang.html">Annotated source of chainlang.js</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Chainlang maintained by <a href="https://github.com/jbreeden">jbreeden</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
